<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task List</title>
</head>
<body>
    <h1>Task List</h1>

    <a href="{% url "task-create" %}">Create new task</a>
    
    <form method="get">
        <label for="sort">Sort by:</label>
        <select name="sort" id="sort" onchange="this.form.submit()">
            <option value="name" {% if request.GET.sort == "name" %}selected{% endif %}>Name</option>
            <option value="flag" {% if request.GET.sort == "flag" %}selected{% endif %}>Status</option>
            <option value="created_at" {% if request.GET.sort == "created_at" or not request.GET.sort %}selected{% endif %}>Creation time</option>
            <option value="updated_at" {% if request.GET.sort == "updated_at" %}selected{% endif %}>Updated time</option>
        </select>
    </form>

    <ul>
        {% for task in tasks %}
            <li>
                Name: {{task.name}}
                {% if task.flag %} 
                ✅ Completed 
                {% else %} 
                ❌ Pending 
                {% endif %}
                <br>
                Description: {{task.description}}
                <br>
                Created at: {{task.created_at}}
                <br>
                Updated at: {{task.updated_at}}
                <br>
                <a href="{% url "task-update" task.pk %}">Update task</a>
                <a href="{% url "task-delete" task.pk %}">Delete task</a>   
            </li>
            <br>
        {% empty %}
            <li>No tasks yet!</li>
        {% endfor %}
    </ul>
        
</body>
</html>